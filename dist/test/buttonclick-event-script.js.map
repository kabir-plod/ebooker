{"version":3,"file":"buttonclick-event-script.js","sources":["webpack:///webpack/bootstrap 15c53bbc23d5b75f5c11?5551","webpack:///./tests/fictionpress-test.ts","webpack:///./src/parsers/FictionpressParser.ts","webpack:///./tests/Q-main-test.ts"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 15c53bbc23d5b75f5c11","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar FictionpressParser_1 = require(\"../src/parsers/FictionpressParser\");\r\nvar fictionpressTestInfo = [\r\n    {\r\n        testName: 'fictionpress parser, single chapter',\r\n        url: 'https://www.fanfiction.net/s/2048837/1/Reminiscence',\r\n        title: 'Reminiscence',\r\n        author: 'Kenya Starflight',\r\n        chapterUrls: ['https://www.fanfiction.net/s/2048837/1/Reminiscence'],\r\n        parser: FictionpressParser_1.default.getParserReturner()\r\n    },\r\n    {\r\n        testName: 'fictionpress parser, multiple chapters',\r\n        url: 'https://www.fictionpress.com/s/3305498/2/When-Darkness-Shines-Brightest',\r\n        title: 'When Darkness Shines Brightest',\r\n        author: 'JulmaSatu',\r\n        chapterUrls: [\r\n            'https://www.fictionpress.com/s/3305498/1/When-Darkness-Shines-Brightest',\r\n            'https://www.fictionpress.com/s/3305498/2/When-Darkness-Shines-Brightest',\r\n            'https://www.fictionpress.com/s/3305498/3/When-Darkness-Shines-Brightest',\r\n            'https://www.fictionpress.com/s/3305498/4/When-Darkness-Shines-Brightest'\r\n        ],\r\n        parser: FictionpressParser_1.default.getParserReturner()\r\n    }\r\n];\r\nexports.default = fictionpressTestInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./tests/fictionpress-test.ts\n// module id = 25\n// module chunks = 1","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar FictionpressParser = (function () {\r\n    function FictionpressParser(_document, pageUrl) {\r\n        this.NUM_SLASHES_FOR_URL_PREFIX = 5;\r\n        this._document = _document;\r\n        this.pageUrl = pageUrl;\r\n        this.urlPrefix = this.parseUrlPrefix(pageUrl);\r\n        this.urlPostfix = this.parseUrlPostfix(pageUrl);\r\n    }\r\n    FictionpressParser.getParserReturner = function () {\r\n        return function (_document, pageURL) {\r\n            return new FictionpressParser(_document, pageURL);\r\n        };\r\n    };\r\n    FictionpressParser.prototype.getTitle = function () {\r\n        console.log('_document: ' + this._document);\r\n        return this._document.querySelector('b.xcontrast_txt').innerText;\r\n    };\r\n    FictionpressParser.prototype.getAuthor = function () {\r\n        return this._document.querySelectorAll('a.xcontrast_txt')[2].innerText;\r\n    };\r\n    FictionpressParser.prototype.getChapterUrls = function () {\r\n        var selectElem = this._document.getElementsByTagName('select')[0];\r\n        if (selectElem == undefined) {\r\n            return [this.pageUrl];\r\n        }\r\n        else {\r\n            var numChapters = selectElem.options.length;\r\n            var chapterUrls = [];\r\n            for (var i = 0; i < numChapters; i++) {\r\n                chapterUrls.push(this.urlPrefix + i.toString() + this.urlPostfix);\r\n            }\r\n            return chapterUrls;\r\n        }\r\n    };\r\n    FictionpressParser.prototype.parseChapterFromDocument = function (_document) {\r\n        return {\r\n            data: this._document.querySelector('#chapters').innerText\r\n        };\r\n    };\r\n    FictionpressParser.prototype.parseUrlPrefix = function (pageUrl) {\r\n        var tokens = pageUrl.split('/');\r\n        return tokens.slice(0, this.NUM_SLASHES_FOR_URL_PREFIX).join('/') + '/';\r\n    };\r\n    FictionpressParser.prototype.parseUrlPostfix = function (pageUrl) {\r\n        var tokens = pageUrl.split('/');\r\n        return '/' + tokens.slice(this.NUM_SLASHES_FOR_URL_PREFIX + 1, tokens.length).join('/');\r\n    };\r\n    return FictionpressParser;\r\n}());\r\nexports.default = FictionpressParser;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/parsers/FictionpressParser.ts\n// module id = 27\n// module chunks = 1","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar fictionpress_test_1 = require(\"./fictionpress-test\");\r\nvar testInfoArr = fictionpress_test_1.default.slice();\r\nvar testInfoObj = {};\r\nvar createCallbackCounter = testInfoArr.length;\r\nvar updateCallbackCounter = testInfoArr.length;\r\nchrome.browserAction.onClicked.addListener(handleButtonClick);\r\nfunction handleButtonClick() {\r\n    chrome.windows.create({\r\n        'incognito': true\r\n    }, function callback(window) {\r\n        setupBrowser(window);\r\n    });\r\n}\r\nfunction setupBrowser(window) {\r\n    var _loop_1 = function (i) {\r\n        chrome.tabs.create({\r\n            'url': testInfoArr[i].url\r\n        }, function callback(tab) {\r\n            testInfoObj.tabId = testInfoArr[i];\r\n            console.log('testInfoObj: ' + JSON.stringify(testInfoObj));\r\n        });\r\n    };\r\n    for (var i = 0; i < testInfoArr.length; i++) {\r\n        _loop_1(i);\r\n    }\r\n}\r\nchrome.tabs.onUpdated.addListener(activateTabOnLoad);\r\nfunction activateTabOnLoad(tabId, changeInfo) {\r\n    console.log('update info: ' + JSON.stringify({ tabId: tabId, changeInfo: changeInfo }));\r\n    if (changeInfo.status === 'complete') {\r\n        chrome.tabs.update(tabId, {\r\n            'active': true\r\n        });\r\n    }\r\n}\r\nchrome.tabs.onActivated.addListener(runTestsForActiveTab);\r\nfunction runTestsForActiveTab(activeInfo) {\r\n    var testInfo = testInfoObj.tabId;\r\n    console.log('Sending message');\r\n    chrome.tabs.query({\r\n        active: true,\r\n        currentWindow: true\r\n    }, function callback(tabs) {\r\n        console.log('active tabs: ' + JSON.stringify(tabs));\r\n        chrome.runtime.sendMessage(tabs[0].id.toString(), { testInfo: testInfo });\r\n    });\r\n}\r\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\r\n    console.log('message: ' + request.message);\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./tests/Q-main-test.ts\n// module id = 28\n// module chunks = 1"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;;;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}